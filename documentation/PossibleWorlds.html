<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PossibleWorlds Class Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        code {
            background-color: #ecf0f1;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: Consolas, monospace;
        }
        pre {
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 6px;
            overflow-x: auto;
        }
        table {
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid #bdc3c7;
        }
        th, td {
            padding: 8px 12px;
        }
        th {
            background-color: #34495e;
            color: #fff;
        }
    </style>
</head>
<body>
    <h1>PossibleWorlds Class</h1>

    <h2>Overview</h2>
    <p>
        The <code>PossibleWorlds</code> class provides a framework for constructing and analyzing
        all possible worlds and propositions for a set of sentences, as conceptual framework. It is designed to
        support operations such as evaluating logical expressions, viewing worlds and propositions,
        and exporting compact JSON representations for inspection.
    </p>

    <h2>Initialization</h2>
    <pre><code>PossibleWorlds(n_props, sentences=None, global_shortcuts=False)</code></pre>
    <p>
        <strong>Parameters:</strong>
        <ul>
            <li><code>n_props</code> (int): Number of basic propositions/sentences, which are independent, in the epistemic space. They split the actual world into possible worlds</li>
            <li><code>sentences</code> (list of str, optional): Custom names or descriptions for each proposition. Defaults to "Sentence 1", "Sentence 2", etc.</li>
            <li><code>global_shortcuts</code> (bool, optional): If True, provides global shortcuts <code>W</code>, <code>P</code>, <code>g</code>, and <code>prt</code> in the Python environment.</li>
        </ul>
    </p>

    <h2>Attributes</h2>
    <table>
        <tr><th>Attribute</th><th>Description</th></tr>
        <tr><td>n_props</td><td>Number of sentences/propositions</td></tr>
        <tr><td>n_worlds</td><td>Total number of possible worlds (2^n_props)</td></tr>
        <tr><td>n_propositions</td><td>Total number of propositions (2^n_worlds)</td></tr>
        <tr><td>conceptual_framework</td><td>List of sentences/proposition labels B1, B2, ...</td></tr>
        <tr><td>sentences</td><td>Dictionary mapping propositions to descriptive sentences</td></tr>
        <tr><td>possible_worlds</td><td>List of all possible worlds with their binary and semantic representations</td></tr>
        <tr><td>propositions</td><td>List of all propositions as sets of worlds</td></tr>
        <tr><td>w</td><td>Shortcut lambda to access a world view <code>W(i)</code></td></tr>
        <tr><td>p</td><td>Shortcut lambda to access a proposition view <code>P(k)</code></td></tr>
    </table>

    <h2>Key Methods</h2>

    <h3>World Methods</h3>
    <ul>
        <li><code>_world_view(i)</code>: Returns a detailed object-like view of world <code>i</code> including ID, label, bitstring, notation, and sentence form.</li>
        <li><code>get_world_bitstring(i)</code>: Returns the binary truth vector of world <code>i</code>.</li>
        <li><code>get_world_notation(i)</code>: Returns a set-theoretic notation of world <code>i</code>.</li>
        <li><code>get_sentence_notation(i)</code>: Returns full sentential version of world <code>i</code> with negations.</li>
        <li><code>show_worlds(limit=16)</code>: Displays the first <code>limit</code> worlds.</li>
    </ul>

    <h3>Proposition Methods</h3>
    <ul>
        <li><code>_prop_view(k)</code>: Returns an object-like view of proposition <code>Pk</code> including the worlds it holds in and its bitstring.</li>
        <li><code>get_proposition_bitstring(k)</code>: Returns the binary membership vector of proposition <code>k</code>.</li>
        <li><code>get_proposition_worlds(k)</code>: Returns the set of worlds where proposition <code>Pk</code> is true.</li>
        <li><code>show_propositions(limit=16)</code>: Displays the first <code>limit</code> propositions.</li>
    </ul>

    <h3>Logical Expression Evaluation</h3>
    <ul>
        <li><code>g(expr_str)</code>: Evaluates a logical expression like <code>(P3 & P5) || (P1)</code> and returns the worlds where it is true along with a compact notation.</li>
        <li><code>worlds_satisfying(formula_fn)</code>: Returns worlds satisfying a boolean function on bitstrings.</li>
        <li><code>worlds_satisfying_expr(expr_str)</code>: Evaluates a set-theoretic logical expression like <code>(B1 ∩ ¬B2) ∪ B3</code> and returns satisfying worlds.</li>
    </ul>

    <h3>Display & Export</h3>
    <ul>
        <li><code>prt(expr)</code>: Pretty-print worlds, propositions, or the results of <code>g()</code> with subscript notation.</li>
        <li><code>to_json(limit_worlds=8, limit_props=8)</code>: Export a compact JSON-style representation of the space.</li>
    </ul>

    <h2>Usage Example</h2>
    <pre><code>
# Initialize epistemic space with 3 propositions
space = PossibleWorlds(3, sentences=["It rains", "I have an umbrella", "I go outside"])

# View a specific world
w0 = space.w(0)
print(w0)

# View a specific proposition
p3 = space.p(3)
print(p3)

# Evaluate a logical expression
result = space.g("(P1 & P2) | P3")
print(space.prt(result))

# Evaluate set-theoretic expression
expr_result = space.worlds_satisfying_expr("(B1 ∩ ¬B2) ∪ B3")
print(expr_result)

# Export JSON
json_data = space.to_json()
print(json_data)
    </code></pre>
</body>
</html>
